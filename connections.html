<!doctype html>
<html class="no-js" lang="zh-CN" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="搜索" href="search.html" /><link rel="next" title="集群(Clustering)" href="clustering.html" /><link rel="prev" title="RedisTimeSeries 命令" href="redismodules/timeseries.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>连接到 Redis (Connecting to Redis) - redis-py 5.1.1 文档</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">redis-py 5.1.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/logo-redis.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">redis-py 5.1.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="搜索" name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">索引</a></li>
</ul>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="commands/index.html">Redis 命令</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Redis 命令</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="commands/core.html">核心命令(Core Commands)</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/sentinel.html">哨兵命令(Sentinel Commands)</a></li>
<li class="toctree-l2"><a class="reference internal" href="commands/cluster.html">Redis 集群命令(Cluster Commands)</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="redismodules/index.html">Redis 模块命令(Modules Commands)</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Redis 模块命令(Modules Commands)</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="redismodules/bloom.html">RedisBloom 命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="redismodules/graph.html">RedisGraph 命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="redismodules/json.html">RedisJSON 命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="redismodules/search.html">RediSearch 命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="redismodules/timeseries.html">RedisTimeSeries 命令</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">连接到 Redis (Connecting to Redis)</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">集群(Clustering)</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">异常(Exceptions)</a></li>
<li class="toctree-l1"><a class="reference internal" href="backoff.html">回退(Backoff)</a></li>
<li class="toctree-l1"><a class="reference internal" href="lock.html">锁(Lock)</a></li>
<li class="toctree-l1"><a class="reference internal" href="retry.html">重试工具(Retry Helpers)</a></li>
<li class="toctree-l1"><a class="reference internal" href="lua_scripting.html">Lua脚本(Lua Scripting)</a></li>
<li class="toctree-l1"><a class="reference internal" href="opentelemetry.html">集成 OpenTelemetry(Integrating)</a></li>
<li class="toctree-l1"><a class="reference internal" href="resp3_features.html">RESP 3 功能(RESP 3 Features)</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">高级功能(Advanced Features)</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="examples.html">Examples</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Examples</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/connection_examples.html">连接示例(Connection Examples)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/ssl_connection_examples.html">SSL 连接示例</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/asyncio_examples.html">异步示例(Asyncio Examples)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/search_json_examples.html">索引 / 查询 JSON 文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/set_and_get_examples.html"><code class="docutils literal notranslate"><span class="pre">set</span></code> 和 <code class="docutils literal notranslate"><span class="pre">get</span></code> 基本操作</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/search_vector_similarity_examples.html">向量相似度(Vector Similarity)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/pipeline_examples.html">管道示例</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/timeseries_examples.html">时间序列(Timeseries)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/redis-stream-example.html">Redis 流示例(Stream Examples)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/redis-stream-example.html#流组(Stream-groups)">流组(Stream groups)</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/opentelemetry_api_examples.html">OpenTelemetry Python API</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/redis/redis-py/blob/master/docs/connections.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/redis/redis-py/edit/master/docs/connections.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="redis-connecting-to-redis">
<h1>连接到 Redis (Connecting to Redis)<a class="headerlink" href="#redis-connecting-to-redis" title="Link to this heading">¶</a></h1>
<section id="generic-client">
<h2>通用客户端(Generic Client)<a class="headerlink" href="#generic-client" title="Link to this heading">¶</a></h2>
<p>这是用于直接连接到标准 Redis 节点的客户端。</p>
<dl class="py class">
<dt class="sig sig-object py" id="redis.Redis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.</span></span><span class="sig-name descname"><span class="pre">Redis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_connect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unix_socket_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">charset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode_responses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_keyfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_certfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_cert_reqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'required'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_certs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_check_hostname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_validate_ocsp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_validate_ocsp_stapled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ocsp_context</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ocsp_expected_cert</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_min_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ciphers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_connection_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">health_check_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'redis-py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5.1.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redis_connect_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credential_provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis" title="Link to this definition">¶</a></dt>
<dd><p>Implementation of the Redis protocol.</p>
<p>This abstract class provides a Python interface to all Redis commands
and an implementation of the Redis protocol.</p>
<p>Pipelines derive from this, implementing how
the commands are sent and received to the Redis server. Based on
configuration, an instance will either use a ConnectionPool, or
Connection object to talk to redis.</p>
<p>It is not safe to pass PubSub or Pipeline objects between threads.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>credential_provider</strong> (<em>CredentialProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>protocol</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache</strong> (<em>CacheInterface</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache_config</strong> (<em>CacheConfig</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.from_pool">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_pool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.from_pool"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.from_pool" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client from the given connection pool.
The Redis client will take ownership of the connection pool and
close it when the Redis client is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>connection_pool</strong> (<a class="reference internal" href="#redis.connection.ConnectionPool" title="redis.connection.ConnectionPool"><em>ConnectionPool</em></a>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.Redis" title="redis.client.Redis"><em>Redis</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client object configured from the given URL</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>redis://[[username]:[password]]@localhost:6379/0
rediss://[[username]:[password]]@localhost:6379/0
unix://[username@]/path/to/socket.sock?db=0[&amp;password=password]
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unix://</span></code>: creates a Unix Domain Socket connection.</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values
are passed through urllib.parse.unquote in order to replace any
percent-encoded values with their corresponding characters.</p>
<p>There are several ways to specify a database number. The first value
found will be used:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> querystring option, e.g. redis://localhost?db=0</p></li>
<li><p>If using the redis:// or rediss:// schemes, the path argument
of the url, e.g. redis://localhost/0</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> keyword argument to this function.</p></li>
</ol>
</div></blockquote>
<p>If none of these options are specified, the default db=0 is used.</p>
<p>All querystring options are cast to their appropriate Python types.
Boolean arguments can be specified with string values &quot;True&quot;/&quot;False&quot;
or &quot;Yes&quot;/&quot;No&quot;. Values that cannot be properly cast cause a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once parsed, the querystring arguments
and keyword arguments are passed to the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code>'s
class initializer. In the case of conflicting arguments, querystring
arguments always win.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>url</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.Redis" title="redis.client.Redis"><em>Redis</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.get_connection_kwargs">
<span class="sig-name descname"><span class="pre">get_connection_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.get_connection_kwargs"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.get_connection_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection's key-word arguments</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection pool's encoder</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Encoder</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.load_external_module">
<span class="sig-name descname"><span class="pre">load_external_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funcname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.load_external_module"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.load_external_module" title="Link to this definition">¶</a></dt>
<dd><p>This function can be used to add externally defined redis modules,
and their namespaces to the redis client.</p>
<p>funcname - A string containing the name of the function to create
func - The function, being added to this class.</p>
<p>ex: Assume that one has a custom redis module named foomod that
creates command named 'foo.dothing' and 'foo.anotherthing' in redis.
To load function functions into this namespace:</p>
<p>from redis import Redis
from foomodule import F
r = Redis()
r.load_external_module(&quot;foo&quot;, F)
r.foo().dothing('your', 'arguments')</p>
<p>For a concrete example see the reimport of the redisjson module in
tests/test_connection.py::test_loading_external_modules</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.lock"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.lock" title="Link to this definition">¶</a></dt>
<dd><p>Return a new Lock object using key <code class="docutils literal notranslate"><span class="pre">name</span></code> that mimics
the behavior of threading.Lock.</p>
<p>If specified, <code class="docutils literal notranslate"><span class="pre">timeout</span></code> indicates a maximum life for the lock.
By default, it will remain locked until release() is called.</p>
<p><code class="docutils literal notranslate"><span class="pre">sleep</span></code> indicates the amount of time to sleep per loop iteration
when the lock is in blocking mode and another client is currently
holding the lock.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking</span></code> indicates whether calling <code class="docutils literal notranslate"><span class="pre">acquire</span></code> should block until
the lock has been acquired or to fail immediately, causing <code class="docutils literal notranslate"><span class="pre">acquire</span></code>
to return False and the lock not being acquired. Defaults to True.
Note this value can be overridden by passing a <code class="docutils literal notranslate"><span class="pre">blocking</span></code>
argument to <code class="docutils literal notranslate"><span class="pre">acquire</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> indicates the maximum amount of time in seconds to
spend trying to acquire the lock. A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates
continue trying forever. <code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> can be specified as a
float or integer, both representing the number of seconds to wait.</p>
<p><code class="docutils literal notranslate"><span class="pre">lock_class</span></code> forces the specified lock implementation. Note that as
of redis-py 3.0, the only lock class we implement is <code class="docutils literal notranslate"><span class="pre">Lock</span></code> (which is
a Lua-based lock). So, it's unlikely you'll need this parameter, unless
you have created your own custom lock class.</p>
<p><code class="docutils literal notranslate"><span class="pre">thread_local</span></code> indicates whether the lock token is placed in
thread-local storage. By default, the token is placed in thread local
storage so that a thread only sees its token, not a token set by
another thread. Consider the following timeline:</p>
<blockquote>
<div><dl class="simple">
<dt>time: 0, thread-1 acquires <cite>my-lock</cite>, with a timeout of 5 seconds.</dt><dd><p>thread-1 sets the token to &quot;abc&quot;</p>
</dd>
<dt>time: 1, thread-2 blocks trying to acquire <cite>my-lock</cite> using the</dt><dd><p>Lock instance.</p>
</dd>
<dt>time: 5, thread-1 has not yet completed. redis expires the lock</dt><dd><p>key.</p>
</dd>
<dt>time: 5, thread-2 acquired <cite>my-lock</cite> now that it's available.</dt><dd><p>thread-2 sets the token to &quot;xyz&quot;</p>
</dd>
<dt>time: 6, thread-1 finishes its work and calls release(). if the</dt><dd><p>token is <em>not</em> stored in thread local storage, then
thread-1 would see the token value as &quot;xyz&quot; and would be
able to successfully release the thread-2's lock.</p>
</dd>
</dl>
</div></blockquote>
<p>In some use cases it's necessary to disable thread local storage. For
example, if you have code where one thread acquires a lock and passes
that lock instance to a worker thread to release later. If thread
local storage isn't disabled in this case, the worker thread won't see
the token set by the thread that acquired the lock. Our assumption
is that these cases aren't common and as such default to using
thread local storage.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>str</em>)</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>sleep</strong> (<em>float</em>)</p></li>
<li><p><strong>blocking</strong> (<em>bool</em>)</p></li>
<li><p><strong>blocking_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lock_class</strong> (<em>None</em><em> | </em><em>Any</em>)</p></li>
<li><p><strong>thread_local</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.parse_response">
<span class="sig-name descname"><span class="pre">parse_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.parse_response"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.parse_response" title="Link to this definition">¶</a></dt>
<dd><p>Parses a response from the Redis server</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.pipeline">
<span class="sig-name descname"><span class="pre">pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_hint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.pipeline"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.pipeline" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pipeline object that can queue multiple commands for
later execution. <code class="docutils literal notranslate"><span class="pre">transaction</span></code> indicates whether all commands
should be executed atomically. Apart from making a group of operations
atomic, pipelines are useful for reducing the back-and-forth overhead
between the client and server.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Pipeline</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.pubsub">
<span class="sig-name descname"><span class="pre">pubsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.pubsub"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.pubsub" title="Link to this definition">¶</a></dt>
<dd><p>Return a Publish/Subscribe object. With this object, you can
subscribe to channels and listen for messages that get published to
them.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.set_response_callback">
<span class="sig-name descname"><span class="pre">set_response_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.set_response_callback"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.set_response_callback" title="Link to this definition">¶</a></dt>
<dd><p>Set a custom Response Callback</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>)</p></li>
<li><p><strong>callback</strong> (<em>Callable</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.Redis.transaction">
<span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">watches</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/client.html#Redis.transaction"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.Redis.transaction" title="Link to this definition">¶</a></dt>
<dd><p>Convenience method for executing the callable <cite>func</cite> as a transaction
while watching all keys specified in <cite>watches</cite>. The 'func' callable
should expect a single argument which is a Pipeline object.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><em>Pipeline</em><em>]</em><em>, </em><em>None</em><em>]</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="sentinel-client">
<h2>哨兵客户端(Sentinel Client)<a class="headerlink" href="#sentinel-client" title="Link to this heading">¶</a></h2>
<p>Redis <a class="reference external" href="https://redis.io/topics/sentinel">Sentinel</a> 提供 Redis 的高可用性。有些命令只能在以哨兵模式运行的 Redis 节点上执行。连接到这些节点并对它们执行命令需要使用哨兵连接。</p>
<p>连接示例（假设 Redis 在下面列出的端口上存在）：</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">redis</span> <span class="kn">import</span> <span class="n">Sentinel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentinel</span> <span class="o">=</span> <span class="n">Sentinel</span><span class="p">([(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">26379</span><span class="p">)],</span> <span class="n">socket_timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentinel</span><span class="o">.</span><span class="n">discover_master</span><span class="p">(</span><span class="s1">&#39;mymaster&#39;</span><span class="p">)</span>
<span class="go">(&#39;127.0.0.1&#39;, 6379)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentinel</span><span class="o">.</span><span class="n">discover_slaves</span><span class="p">(</span><span class="s1">&#39;mymaster&#39;</span><span class="p">)</span>
<span class="go">[(&#39;127.0.0.1&#39;, 6380)]</span>
</pre></div>
</div>
<section id="id1">
<h3>哨兵(Sentinel)<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.sentinel.</span></span><span class="sig-name descname"><span class="pre">Sentinel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sentinels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_other_sentinels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sentinel_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">force_master_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">connection_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel" title="Link to this definition">¶</a></dt>
<dd><p>Redis Sentinel cluster client</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">redis.sentinel</span> <span class="kn">import</span> <span class="n">Sentinel</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sentinel</span> <span class="o">=</span> <span class="n">Sentinel</span><span class="p">([(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">26379</span><span class="p">)],</span> <span class="n">socket_timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">master</span> <span class="o">=</span> <span class="n">sentinel</span><span class="o">.</span><span class="n">master_for</span><span class="p">(</span><span class="s1">&#39;mymaster&#39;</span><span class="p">,</span> <span class="n">socket_timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">master</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">slave</span> <span class="o">=</span> <span class="n">sentinel</span><span class="o">.</span><span class="n">slave_for</span><span class="p">(</span><span class="s1">&#39;mymaster&#39;</span><span class="p">,</span> <span class="n">socket_timeout</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">slave</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">)</span>
<span class="go">b&#39;bar&#39;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">sentinels</span></code> is a list of sentinel nodes. Each node is represented by
a pair (hostname, port).</p>
<p><code class="docutils literal notranslate"><span class="pre">min_other_sentinels</span></code> defined a minimum number of peers for a sentinel.
When querying a sentinel, if it doesn't meet this threshold, responses
from that sentinel won't be considered valid.</p>
<p><code class="docutils literal notranslate"><span class="pre">sentinel_kwargs</span></code> is a dictionary of connection arguments used when
connecting to sentinel instances. Any argument that can be passed to
a normal Redis connection can be specified here. If <code class="docutils literal notranslate"><span class="pre">sentinel_kwargs</span></code> is
not specified, any socket_timeout and socket_keepalive options specified
in <code class="docutils literal notranslate"><span class="pre">connection_kwargs</span></code> will be used.</p>
<p><code class="docutils literal notranslate"><span class="pre">connection_kwargs</span></code> are keyword arguments that will be used when
establishing a connection to a Redis server.</p>
<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.discover_master">
<span class="sig-name descname"><span class="pre">discover_master</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.discover_master"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.discover_master" title="Link to this definition">¶</a></dt>
<dd><p>Asks sentinel servers for the Redis master's address corresponding
to the service labeled <code class="docutils literal notranslate"><span class="pre">service_name</span></code>.</p>
<p>Returns a pair (address, port) or raises MasterNotFoundError if no
master is found.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.discover_slaves">
<span class="sig-name descname"><span class="pre">discover_slaves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.discover_slaves"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.discover_slaves" title="Link to this definition">¶</a></dt>
<dd><p>Returns a list of alive slaves for service <code class="docutils literal notranslate"><span class="pre">service_name</span></code></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.execute_command">
<span class="sig-name descname"><span class="pre">execute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.execute_command"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.execute_command" title="Link to this definition">¶</a></dt>
<dd><p>Execute Sentinel command in sentinel nodes.
once - If set to True, then execute the resulting command on a single
node at random, rather than across the entire sentinel cluster.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.filter_slaves">
<span class="sig-name descname"><span class="pre">filter_slaves</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">slaves</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.filter_slaves"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.filter_slaves" title="Link to this definition">¶</a></dt>
<dd><p>Remove slaves that are in an ODOWN or SDOWN state</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.master_for">
<span class="sig-name descname"><span class="pre">master_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redis_class=&lt;class</span> <span class="pre">'redis.client.Redis'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_pool_class=&lt;class</span> <span class="pre">'redis.sentinel.SentinelConnectionPool'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.master_for"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.master_for" title="Link to this definition">¶</a></dt>
<dd><p>Returns a redis client instance for the <code class="docutils literal notranslate"><span class="pre">service_name</span></code> master.</p>
<p>A <a class="reference internal" href="#redis.sentinel.SentinelConnectionPool" title="redis.sentinel.SentinelConnectionPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentinelConnectionPool</span></code></a> class is
used to retrieve the master's address before establishing a new
connection.</p>
<p>NOTE: If the master's address has changed, any cached connections to
the old master are closed.</p>
<p>By default clients will be a <a class="reference internal" href="#redis.Redis" title="redis.Redis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Redis</span></code></a> instance.
Specify a different class to the <code class="docutils literal notranslate"><span class="pre">redis_class</span></code> argument if you
desire something different.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">connection_pool_class</span></code> specifies the connection pool to
use.  The <a class="reference internal" href="#redis.sentinel.SentinelConnectionPool" title="redis.sentinel.SentinelConnectionPool"><code class="xref py py-class docutils literal notranslate"><span class="pre">SentinelConnectionPool</span></code></a>
will be used by default.</p>
<p>All other keyword arguments are merged with any connection_kwargs
passed to this class and passed to the connection pool as keyword
arguments to be used to initialize Redis connections.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.Sentinel.slave_for">
<span class="sig-name descname"><span class="pre">slave_for</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redis_class=&lt;class</span> <span class="pre">'redis.client.Redis'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_pool_class=&lt;class</span> <span class="pre">'redis.sentinel.SentinelConnectionPool'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#Sentinel.slave_for"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.Sentinel.slave_for" title="Link to this definition">¶</a></dt>
<dd><p>Returns redis client instance for the <code class="docutils literal notranslate"><span class="pre">service_name</span></code> slave(s).</p>
<p>A SentinelConnectionPool class is used to retrieve the slave's
address before establishing a new connection.</p>
<p>By default clients will be a <a class="reference internal" href="#redis.Redis" title="redis.Redis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Redis</span></code></a> instance.
Specify a different class to the <code class="docutils literal notranslate"><span class="pre">redis_class</span></code> argument if you
desire something different.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">connection_pool_class</span></code> specifies the connection pool to use.
The SentinelConnectionPool will be used by default.</p>
<p>All other keyword arguments are merged with any connection_kwargs
passed to this class and passed to the connection pool as keyword
arguments to be used to initialize Redis connections.</p>
</dd></dl>

</dd></dl>

</section>
<section id="sentinelconnectionpool">
<h3>哨兵连接池(SentinelConnectionPool)<a class="headerlink" href="#sentinelconnectionpool" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.sentinel.SentinelConnectionPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.sentinel.</span></span><span class="sig-name descname"><span class="pre">SentinelConnectionPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">service_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sentinel_manager</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#SentinelConnectionPool"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.SentinelConnectionPool" title="Link to this definition">¶</a></dt>
<dd><p>Sentinel backed connection pool.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">check_connection</span></code> flag is set to True, SentinelManagedConnection
sends a PING command right after establishing the connection.</p>
<dl class="py method">
<dt class="sig sig-object py" id="redis.sentinel.SentinelConnectionPool.rotate_slaves">
<span class="sig-name descname"><span class="pre">rotate_slaves</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/sentinel.html#SentinelConnectionPool.rotate_slaves"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.sentinel.SentinelConnectionPool.rotate_slaves" title="Link to this definition">¶</a></dt>
<dd><p>Round-robin slave balancer</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="cluster-client">
<h2>集群客户端(Cluster Client)<a class="headerlink" href="#cluster-client" title="Link to this heading">¶</a></h2>
<p>此客户端用于连接到 Redis 集群。</p>
<section id="rediscluster">
<h3>RedisCluster<a class="headerlink" href="#rediscluster" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.cluster.</span></span><span class="sig-name descname"><span class="pre">RedisCluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startup_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_error_retry_attempts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_full_coverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reinitialize_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_from_replicas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic_startup_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address_remap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>port</strong> (<em>int</em>)</p></li>
<li><p><strong>startup_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="#redis.cluster.ClusterNode" title="redis.cluster.ClusterNode"><em>ClusterNode</em></a><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>cluster_error_retry_attempts</strong> (<em>int</em>)</p></li>
<li><p><strong>retry</strong> (<a class="reference internal" href="retry.html#redis.retry.Retry" title="redis.retry.Retry"><em>Retry</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>require_full_coverage</strong> (<em>bool</em>)</p></li>
<li><p><strong>reinitialize_steps</strong> (<em>int</em>)</p></li>
<li><p><strong>read_from_replicas</strong> (<em>bool</em>)</p></li>
<li><p><strong>dynamic_startup_nodes</strong> (<em>bool</em>)</p></li>
<li><p><strong>url</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>address_remap</strong> (<em>Callable</em><em>[</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>cache</strong> (<em>CacheInterface</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache_config</strong> (<em>CacheConfig</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.determine_slot">
<span class="sig-name descname"><span class="pre">determine_slot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.determine_slot"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.determine_slot" title="Link to this definition">¶</a></dt>
<dd><p>Figure out what slot to use based on args.</p>
<dl class="simple">
<dt>Raises a RedisClusterException if there's a missing key and we can't</dt><dd><p>determine what slots to map the command to; or, if the keys don't
all map to the same key slot.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client object configured from the given URL</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>redis://[[username]:[password]]@localhost:6379/0
rediss://[[username]:[password]]@localhost:6379/0
unix://[username@]/path/to/socket.sock?db=0[&amp;password=password]
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unix://</span></code>: creates a Unix Domain Socket connection.</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values
are passed through urllib.parse.unquote in order to replace any
percent-encoded values with their corresponding characters.</p>
<p>There are several ways to specify a database number. The first value
found will be used:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> querystring option, e.g. redis://localhost?db=0</p></li>
<li><p>If using the redis:// or rediss:// schemes, the path argument
of the url, e.g. redis://localhost/0</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> keyword argument to this function.</p></li>
</ol>
</div></blockquote>
<p>If none of these options are specified, the default db=0 is used.</p>
<p>All querystring options are cast to their appropriate Python types.
Boolean arguments can be specified with string values &quot;True&quot;/&quot;False&quot;
or &quot;Yes&quot;/&quot;No&quot;. Values that cannot be properly cast cause a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once parsed, the querystring arguments
and keyword arguments are passed to the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code>'s
class initializer. In the case of conflicting arguments, querystring
arguments always win.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.get_connection_kwargs">
<span class="sig-name descname"><span class="pre">get_connection_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.get_connection_kwargs"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.get_connection_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Get the connections' key-word arguments</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.get_default_node">
<span class="sig-name descname"><span class="pre">get_default_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.get_default_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.get_default_node" title="Link to this definition">¶</a></dt>
<dd><p>Get the cluster's default node</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Get the connections' encoder</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.get_node_from_key">
<span class="sig-name descname"><span class="pre">get_node_from_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replica</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.get_node_from_key"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.get_node_from_key" title="Link to this definition">¶</a></dt>
<dd><p>Get the node that holds the key's slot.
If replica set to True but the slot doesn't have any replicas, None is
returned.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.keyslot">
<span class="sig-name descname"><span class="pre">keyslot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.keyslot"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.keyslot" title="Link to this definition">¶</a></dt>
<dd><p>Calculate keyslot for a given key.
See Keys distribution model in <a class="reference external" href="https://redis.io/topics/cluster-spec">https://redis.io/topics/cluster-spec</a></p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.load_external_module">
<span class="sig-name descname"><span class="pre">load_external_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funcname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.load_external_module"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.load_external_module" title="Link to this definition">¶</a></dt>
<dd><p>This function can be used to add externally defined redis modules,
and their namespaces to the redis client.</p>
<p><code class="docutils literal notranslate"><span class="pre">funcname</span></code> - A string containing the name of the function to create
<code class="docutils literal notranslate"><span class="pre">func</span></code> - The function, being added to this class.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.lock"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.lock" title="Link to this definition">¶</a></dt>
<dd><p>Return a new Lock object using key <code class="docutils literal notranslate"><span class="pre">name</span></code> that mimics
the behavior of threading.Lock.</p>
<p>If specified, <code class="docutils literal notranslate"><span class="pre">timeout</span></code> indicates a maximum life for the lock.
By default, it will remain locked until release() is called.</p>
<p><code class="docutils literal notranslate"><span class="pre">sleep</span></code> indicates the amount of time to sleep per loop iteration
when the lock is in blocking mode and another client is currently
holding the lock.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking</span></code> indicates whether calling <code class="docutils literal notranslate"><span class="pre">acquire</span></code> should block until
the lock has been acquired or to fail immediately, causing <code class="docutils literal notranslate"><span class="pre">acquire</span></code>
to return False and the lock not being acquired. Defaults to True.
Note this value can be overridden by passing a <code class="docutils literal notranslate"><span class="pre">blocking</span></code>
argument to <code class="docutils literal notranslate"><span class="pre">acquire</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> indicates the maximum amount of time in seconds to
spend trying to acquire the lock. A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates
continue trying forever. <code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> can be specified as a
float or integer, both representing the number of seconds to wait.</p>
<p><code class="docutils literal notranslate"><span class="pre">lock_class</span></code> forces the specified lock implementation. Note that as
of redis-py 3.0, the only lock class we implement is <code class="docutils literal notranslate"><span class="pre">Lock</span></code> (which is
a Lua-based lock). So, it's unlikely you'll need this parameter, unless
you have created your own custom lock class.</p>
<p><code class="docutils literal notranslate"><span class="pre">thread_local</span></code> indicates whether the lock token is placed in
thread-local storage. By default, the token is placed in thread local
storage so that a thread only sees its token, not a token set by
another thread. Consider the following timeline:</p>
<blockquote>
<div><dl class="simple">
<dt>time: 0, thread-1 acquires <cite>my-lock</cite>, with a timeout of 5 seconds.</dt><dd><p>thread-1 sets the token to &quot;abc&quot;</p>
</dd>
<dt>time: 1, thread-2 blocks trying to acquire <cite>my-lock</cite> using the</dt><dd><p>Lock instance.</p>
</dd>
<dt>time: 5, thread-1 has not yet completed. redis expires the lock</dt><dd><p>key.</p>
</dd>
<dt>time: 5, thread-2 acquired <cite>my-lock</cite> now that it's available.</dt><dd><p>thread-2 sets the token to &quot;xyz&quot;</p>
</dd>
<dt>time: 6, thread-1 finishes its work and calls release(). if the</dt><dd><p>token is <em>not</em> stored in thread local storage, then
thread-1 would see the token value as &quot;xyz&quot; and would be
able to successfully release the thread-2's lock.</p>
</dd>
</dl>
</div></blockquote>
<p>In some use cases it's necessary to disable thread local storage. For
example, if you have code where one thread acquires a lock and passes
that lock instance to a worker thread to release later. If thread
local storage isn't disabled in this case, the worker thread won't see
the token set by the thread that acquired the lock. Our assumption
is that these cases aren't common and as such default to using
thread local storage.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.monitor">
<span class="sig-name descname"><span class="pre">monitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">target_node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.monitor"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.monitor" title="Link to this definition">¶</a></dt>
<dd><p>Returns a Monitor object for the specified target node.
The default cluster node will be selected if no target node was
specified.
Monitor is useful for handling the MONITOR command to the redis server.
next_command() method returns one command from monitor
listen() method yields commands from monitor.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.on_connect">
<span class="sig-name descname"><span class="pre">on_connect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.on_connect"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.on_connect" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Initialize the connection, authenticate and select a database and send</dt><dd><p>READONLY if it is set during object initialization.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.pipeline">
<span class="sig-name descname"><span class="pre">pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_hint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.pipeline"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.pipeline" title="Link to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Cluster impl:</dt><dd><p>Pipelines do not work in cluster mode the same way they
do in normal mode. Create a clone of this object so
that simulating pipelines will work correctly. Each
command will be called directly when used and
when calling execute() will only return the result stack.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.pubsub">
<span class="sig-name descname"><span class="pre">pubsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.pubsub"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.pubsub" title="Link to this definition">¶</a></dt>
<dd><p>Allows passing a ClusterNode, or host&amp;port, to get a pubsub instance
connected to the specified node</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.set_default_node">
<span class="sig-name descname"><span class="pre">set_default_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.set_default_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.set_default_node" title="Link to this definition">¶</a></dt>
<dd><p>Set the default node of the cluster.
:param node: 'ClusterNode'
:return True if the default node was set, else False</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.cluster.RedisCluster.set_response_callback">
<span class="sig-name descname"><span class="pre">set_response_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#RedisCluster.set_response_callback"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.RedisCluster.set_response_callback" title="Link to this definition">¶</a></dt>
<dd><p>Set a custom Response Callback</p>
</dd></dl>

</dd></dl>

</section>
<section id="clusternode">
<h3>ClusterNode<a class="headerlink" href="#clusternode" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.cluster.ClusterNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.cluster.</span></span><span class="sig-name descname"><span class="pre">ClusterNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redis_connection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/cluster.html#ClusterNode"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.cluster.ClusterNode" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</section>
</section>
<section id="async-client">
<h2>异步客户端(Async Client)<a class="headerlink" href="#async-client" title="Link to this heading">¶</a></h2>
<p>完整示例见： <a class="reference external" href="examples/asyncio_examples.html">这里</a></p>
<p>此客户端用于异步与 Redis 通信。</p>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.client.</span></span><span class="sig-name descname"><span class="pre">Redis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_connect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unix_socket_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode_responses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_keyfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_certfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_cert_reqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'required'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_certs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_check_hostname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_min_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ciphers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_connection_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">health_check_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'redis-py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5.1.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_close_connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redis_connect_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credential_provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis" title="Link to this definition">¶</a></dt>
<dd><p>Implementation of the Redis protocol.</p>
<p>This abstract class provides a Python interface to all Redis commands
and an implementation of the Redis protocol.</p>
<p>Pipelines derive from this, implementing how
the commands are sent and received to the Redis server. Based on
configuration, an instance will either use a ConnectionPool, or
Connection object to talk to redis.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>)</p></li>
<li><p><strong>port</strong> (<em>int</em>)</p></li>
<li><p><strong>db</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>password</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_connect_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_keepalive</strong> (<em>bool</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_keepalive_options</strong> (<em>Mapping</em><em>[</em><em>int</em><em>, </em><em>int</em><em> | </em><em>bytes</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>connection_pool</strong> (<a class="reference internal" href="#redis.asyncio.connection.ConnectionPool" title="redis.asyncio.connection.ConnectionPool"><em>ConnectionPool</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>unix_socket_path</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>encoding</strong> (<em>str</em>)</p></li>
<li><p><strong>encoding_errors</strong> (<em>str</em>)</p></li>
<li><p><strong>decode_responses</strong> (<em>bool</em>)</p></li>
<li><p><strong>retry_on_timeout</strong> (<em>bool</em>)</p></li>
<li><p><strong>retry_on_error</strong> (<em>list</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_keyfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_certfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_cert_reqs</strong> (<em>str</em>)</p></li>
<li><p><strong>ssl_ca_certs</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ca_data</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_check_hostname</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_min_version</strong> (<em>TLSVersion</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ciphers</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>max_connections</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>single_connection_client</strong> (<em>bool</em>)</p></li>
<li><p><strong>health_check_interval</strong> (<em>int</em>)</p></li>
<li><p><strong>client_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_version</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>username</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>retry</strong> (<em>Retry</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>auto_close_connection_pool</strong> (<em>bool</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>credential_provider</strong> (<em>CredentialProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>protocol</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.aclose">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.aclose"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.aclose" title="Link to this definition">¶</a></dt>
<dd><p>Closes Redis client connection</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>close_connection_pool</strong> (<em>bool</em><em> | </em><em>None</em>) -- decides whether to close the connection pool used by this Redis client,
overriding Redis.auto_close_connection_pool.
By default, let Redis.auto_close_connection_pool decide
whether to close the connection pool.</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">close_connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.close" title="Link to this definition">¶</a></dt>
<dd><p>Alias for aclose(), for backwards compatibility</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>close_connection_pool</strong> (<em>bool</em><em> | </em><em>None</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.execute_command">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.execute_command"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.execute_command" title="Link to this definition">¶</a></dt>
<dd><p>Execute a command and return a parsed response</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.from_pool">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_pool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_pool</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.from_pool"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.from_pool" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client from the given connection pool.
The Redis client will take ownership of the connection pool and
close it when the Redis client is closed.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>connection_pool</strong> (<a class="reference internal" href="#redis.asyncio.connection.ConnectionPool" title="redis.asyncio.connection.ConnectionPool"><em>ConnectionPool</em></a>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.asyncio.client.Redis" title="redis.asyncio.client.Redis"><em>Redis</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">single_connection_client</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_close_connection_pool</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client object configured from the given URL</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>redis://[[username]:[password]]@localhost:6379/0
rediss://[[username]:[password]]@localhost:6379/0
unix://[username@]/path/to/socket.sock?db=0[&amp;password=password]
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unix://</span></code>: creates a Unix Domain Socket connection.</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values
are passed through urllib.parse.unquote in order to replace any
percent-encoded values with their corresponding characters.</p>
<p>There are several ways to specify a database number. The first value
found will be used:</p>
<ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> querystring option, e.g. redis://localhost?db=0</p></li>
<li><dl class="simple">
<dt>If using the redis:// or rediss:// schemes, the path argument</dt><dd><p>of the url, e.g. redis://localhost/0</p>
</dd>
</dl>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> keyword argument to this function.</p></li>
</ol>
<p>If none of these options are specified, the default db=0 is used.</p>
<p>All querystring options are cast to their appropriate Python types.
Boolean arguments can be specified with string values &quot;True&quot;/&quot;False&quot;
or &quot;Yes&quot;/&quot;No&quot;. Values that cannot be properly cast cause a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once parsed, the querystring arguments
and keyword arguments are passed to the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code>'s
class initializer. In the case of conflicting arguments, querystring
arguments always win.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>)</p></li>
<li><p><strong>single_connection_client</strong> (<em>bool</em>)</p></li>
<li><p><strong>auto_close_connection_pool</strong> (<em>bool</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.get_connection_kwargs">
<span class="sig-name descname"><span class="pre">get_connection_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.get_connection_kwargs"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.get_connection_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection's key-word arguments</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Get the connection pool's encoder</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.load_external_module">
<span class="sig-name descname"><span class="pre">load_external_module</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">funcname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">func</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.load_external_module"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.load_external_module" title="Link to this definition">¶</a></dt>
<dd><p>This function can be used to add externally defined redis modules,
and their namespaces to the redis client.</p>
<p>funcname - A string containing the name of the function to create
func - The function, being added to this class.</p>
<p>ex: Assume that one has a custom redis module named foomod that
creates command named 'foo.dothing' and 'foo.anotherthing' in redis.
To load function functions into this namespace:</p>
<p>from redis import Redis
from foomodule import F
r = Redis()
r.load_external_module(&quot;foo&quot;, F)
r.foo().dothing('your', 'arguments')</p>
<p>For a concrete example see the reimport of the redisjson module in
tests/test_connection.py::test_loading_external_modules</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.lock"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.lock" title="Link to this definition">¶</a></dt>
<dd><p>Return a new Lock object using key <code class="docutils literal notranslate"><span class="pre">name</span></code> that mimics
the behavior of threading.Lock.</p>
<p>If specified, <code class="docutils literal notranslate"><span class="pre">timeout</span></code> indicates a maximum life for the lock.
By default, it will remain locked until release() is called.</p>
<p><code class="docutils literal notranslate"><span class="pre">sleep</span></code> indicates the amount of time to sleep per loop iteration
when the lock is in blocking mode and another client is currently
holding the lock.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking</span></code> indicates whether calling <code class="docutils literal notranslate"><span class="pre">acquire</span></code> should block until
the lock has been acquired or to fail immediately, causing <code class="docutils literal notranslate"><span class="pre">acquire</span></code>
to return False and the lock not being acquired. Defaults to True.
Note this value can be overridden by passing a <code class="docutils literal notranslate"><span class="pre">blocking</span></code>
argument to <code class="docutils literal notranslate"><span class="pre">acquire</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> indicates the maximum amount of time in seconds to
spend trying to acquire the lock. A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates
continue trying forever. <code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> can be specified as a
float or integer, both representing the number of seconds to wait.</p>
<p><code class="docutils literal notranslate"><span class="pre">lock_class</span></code> forces the specified lock implementation. Note that as
of redis-py 3.0, the only lock class we implement is <code class="docutils literal notranslate"><span class="pre">Lock</span></code> (which is
a Lua-based lock). So, it's unlikely you'll need this parameter, unless
you have created your own custom lock class.</p>
<p><code class="docutils literal notranslate"><span class="pre">thread_local</span></code> indicates whether the lock token is placed in
thread-local storage. By default, the token is placed in thread local
storage so that a thread only sees its token, not a token set by
another thread. Consider the following timeline:</p>
<blockquote>
<div><dl class="simple">
<dt>time: 0, thread-1 acquires <cite>my-lock</cite>, with a timeout of 5 seconds.</dt><dd><p>thread-1 sets the token to &quot;abc&quot;</p>
</dd>
<dt>time: 1, thread-2 blocks trying to acquire <cite>my-lock</cite> using the</dt><dd><p>Lock instance.</p>
</dd>
<dt>time: 5, thread-1 has not yet completed. redis expires the lock</dt><dd><p>key.</p>
</dd>
<dt>time: 5, thread-2 acquired <cite>my-lock</cite> now that it's available.</dt><dd><p>thread-2 sets the token to &quot;xyz&quot;</p>
</dd>
<dt>time: 6, thread-1 finishes its work and calls release(). if the</dt><dd><p>token is <em>not</em> stored in thread local storage, then
thread-1 would see the token value as &quot;xyz&quot; and would be
able to successfully release the thread-2's lock.</p>
</dd>
</dl>
</div></blockquote>
<p>In some use cases it's necessary to disable thread local storage. For
example, if you have code where one thread acquires a lock and passes
that lock instance to a worker thread to release later. If thread
local storage isn't disabled in this case, the worker thread won't see
the token set by the thread that acquired the lock. Our assumption
is that these cases aren't common and as such default to using
thread local storage.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>bytes</em><em> | </em><em>str</em><em> | </em><em>memoryview</em>)</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>sleep</strong> (<em>float</em>)</p></li>
<li><p><strong>blocking</strong> (<em>bool</em>)</p></li>
<li><p><strong>blocking_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lock_class</strong> (<em>Type</em><em>[</em><em>Lock</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>thread_local</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Lock</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.parse_response">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">parse_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.parse_response"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.parse_response" title="Link to this definition">¶</a></dt>
<dd><p>Parses a response from the Redis server</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection</strong> (<a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><em>Connection</em></a>)</p></li>
<li><p><strong>command_name</strong> (<em>str</em><em> | </em><em>bytes</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.pipeline">
<span class="sig-name descname"><span class="pre">pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_hint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.pipeline"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.pipeline" title="Link to this definition">¶</a></dt>
<dd><p>Return a new pipeline object that can queue multiple commands for
later execution. <code class="docutils literal notranslate"><span class="pre">transaction</span></code> indicates whether all commands
should be executed atomically. Apart from making a group of operations
atomic, pipelines are useful for reducing the back-and-forth overhead
between the client and server.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>transaction</strong> (<em>bool</em>)</p></li>
<li><p><strong>shard_hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Pipeline</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.pubsub">
<span class="sig-name descname"><span class="pre">pubsub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.pubsub"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.pubsub" title="Link to this definition">¶</a></dt>
<dd><p>Return a Publish/Subscribe object. With this object, you can
subscribe to channels and listen for messages that get published to
them.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>PubSub</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.set_response_callback">
<span class="sig-name descname"><span class="pre">set_response_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.set_response_callback"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.set_response_callback" title="Link to this definition">¶</a></dt>
<dd><p>Set a custom Response Callback</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>)</p></li>
<li><p><strong>callback</strong> (<em>ResponseCallbackProtocol</em><em> | </em><em>AsyncResponseCallbackProtocol</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.client.Redis.transaction">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">func</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">watches</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_hint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_from_callable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watch_delay</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/client.html#Redis.transaction"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.client.Redis.transaction" title="Link to this definition">¶</a></dt>
<dd><p>Convenience method for executing the callable <cite>func</cite> as a transaction
while watching all keys specified in <cite>watches</cite>. The 'func' callable
should expect a single argument which is a Pipeline object.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>Callable</em><em>[</em><em>[</em><em>Pipeline</em><em>]</em><em>, </em><em>Any</em><em> | </em><em>Awaitable</em><em>[</em><em>Any</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>watches</strong> (<em>bytes</em><em> | </em><em>str</em><em> | </em><em>memoryview</em>)</p></li>
<li><p><strong>shard_hint</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>value_from_callable</strong> (<em>bool</em>)</p></li>
<li><p><strong>watch_delay</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="id2">
<h2>异步集群客户端<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<section id="id3">
<h3>RedisCluster (异步)<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.cluster.</span></span><span class="sig-name descname"><span class="pre">RedisCluster</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">startup_nodes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">require_full_coverage</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_from_replicas</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reinitialize_steps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_error_retry_attempts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_error_retry_attempts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2147483648</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">db</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">credential_provider</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">client_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'redis-py'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lib_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'5.1.1'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'utf-8'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">encoding_errors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'strict'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decode_responses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">health_check_interval</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_connect_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">retry_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_certs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ca_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_cert_reqs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'required'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_certfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_check_hostname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_keyfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_min_version</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ssl_ciphers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">protocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address_remap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster" title="Link to this definition">¶</a></dt>
<dd><p>Create a new RedisCluster client.</p>
<p>Pass one of parameters:</p>
<blockquote>
<div><ul class="simple">
<li><p><cite>host</cite> &amp; <cite>port</cite></p></li>
<li><p><cite>startup_nodes</cite></p></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line">Use <code class="docutils literal notranslate"><span class="pre">await</span></code> <a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.initialize" title="redis.asyncio.cluster.RedisCluster.initialize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">initialize()</span></code></a> to find cluster nodes &amp; create connections.</div>
<div class="line">Use <code class="docutils literal notranslate"><span class="pre">await</span></code> <a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.close" title="redis.asyncio.cluster.RedisCluster.close"><code class="xref py py-meth docutils literal notranslate"><span class="pre">close()</span></code></a> to disconnect connections &amp; close client.</div>
</div>
<p>Many commands support the target_nodes kwarg. It can be one of the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">NODE_FLAGS</span></code>:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">PRIMARIES</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">REPLICAS</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">ALL_NODES</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">RANDOM</span></code></p></li>
<li><p><code class="xref py py-attr docutils literal notranslate"><span class="pre">DEFAULT_NODE</span></code></p></li>
</ul>
</div></blockquote>
<p>Note: This client is not thread/process/fork safe.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em><em> | </em><em>None</em>) -- <div class="line-block">
<div class="line">Can be used to point to a startup node</div>
</div>
</p></li>
<li><p><strong>port</strong> (<em>str</em><em> | </em><em>int</em>) -- <div class="line-block">
<div class="line">Port used if <strong>host</strong> is provided</div>
</div>
</p></li>
<li><p><strong>startup_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a><em>] </em><em>| </em><em>None</em>) -- <div class="line-block">
<div class="line"><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a> to used as a startup node</div>
</div>
</p></li>
<li><p><strong>require_full_coverage</strong> (<em>bool</em>) -- <div class="line-block">
<div class="line">When set to <code class="docutils literal notranslate"><span class="pre">False</span></code>: the client will not require a full coverage of
the slots. However, if not all slots are covered, and at least one node
has <code class="docutils literal notranslate"><span class="pre">cluster-require-full-coverage</span></code> set to <code class="docutils literal notranslate"><span class="pre">yes</span></code>, the server will throw
a <a class="reference internal" href="exceptions.html#redis.exceptions.ClusterDownError" title="redis.exceptions.ClusterDownError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterDownError</span></code></a> for some key-based commands.</div>
<div class="line">When set to <code class="docutils literal notranslate"><span class="pre">True</span></code>: all slots must be covered to construct the cluster
client. If not all slots are covered, <a class="reference internal" href="exceptions.html#redis.exceptions.RedisClusterException" title="redis.exceptions.RedisClusterException"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisClusterException</span></code></a> will be
thrown.</div>
<div class="line">See:
<a class="reference external" href="https://redis.io/docs/manual/scaling/#redis-cluster-configuration-parameters">https://redis.io/docs/manual/scaling/#redis-cluster-configuration-parameters</a></div>
</div>
</p></li>
<li><p><strong>read_from_replicas</strong> (<em>bool</em>) -- <div class="line-block">
<div class="line">Enable read from replicas in READONLY mode. You can read possibly stale data.
When set to true, read commands will be assigned between the primary and
its replications in a Round-Robin manner.</div>
</div>
</p></li>
<li><p><strong>reinitialize_steps</strong> (<em>int</em>) -- <div class="line-block">
<div class="line">Specifies the number of MOVED errors that need to occur before reinitializing
the whole cluster topology. If a MOVED error occurs and the cluster does not
need to be reinitialized on this current error handling, only the MOVED slot
will be patched with the redirected node.
To reinitialize the cluster on every MOVED error, set reinitialize_steps to 1.
To avoid reinitializing the cluster on moved errors, set reinitialize_steps to
0.</div>
</div>
</p></li>
<li><p><strong>cluster_error_retry_attempts</strong> (<em>int</em>) -- <div class="line-block">
<div class="line">Number of times to retry before raising an error when <a class="reference internal" href="exceptions.html#redis.exceptions.TimeoutError" title="redis.exceptions.TimeoutError"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeoutError</span></code></a>
or <a class="reference internal" href="exceptions.html#redis.exceptions.ConnectionError" title="redis.exceptions.ConnectionError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionError</span></code></a> or <a class="reference internal" href="exceptions.html#redis.exceptions.ClusterDownError" title="redis.exceptions.ClusterDownError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterDownError</span></code></a> are encountered</div>
</div>
</p></li>
<li><p><strong>connection_error_retry_attempts</strong> (<em>int</em>) -- <div class="line-block">
<div class="line">Number of times to retry before reinitializing when <a class="reference internal" href="exceptions.html#redis.exceptions.TimeoutError" title="redis.exceptions.TimeoutError"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeoutError</span></code></a>
or <a class="reference internal" href="exceptions.html#redis.exceptions.ConnectionError" title="redis.exceptions.ConnectionError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionError</span></code></a> are encountered.
The default backoff strategy will be set if Retry object is not passed (see
default_backoff in backoff.py). To change it, pass a custom Retry object
using the &quot;retry&quot; keyword.</div>
</div>
</p></li>
<li><p><strong>max_connections</strong> (<em>int</em>) -- <div class="line-block">
<div class="line">Maximum number of connections per node. If there are no free connections &amp; the
maximum number of connections are already created, a
<a class="reference internal" href="exceptions.html#redis.exceptions.MaxConnectionsError" title="redis.exceptions.MaxConnectionsError"><code class="xref py py-class docutils literal notranslate"><span class="pre">MaxConnectionsError</span></code></a> is raised. This error may be retried as defined
by <code class="xref py py-attr docutils literal notranslate"><span class="pre">connection_error_retry_attempts</span></code></div>
</div>
</p></li>
<li><p><strong>address_remap</strong> (<em>Callable</em><em>[</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>] </em><em>| </em><em>None</em>) -- <div class="line-block">
<div class="line">An optional callable which, when provided with an internal network
address of a node, e.g. a <cite>(host, port)</cite> tuple, will return the address
where the node is reachable.  This can be used to map the addresses at
which the nodes _think_ they are, to addresses at which a client may
reach them, such as when they sit behind a proxy.</div>
</div>
</p></li>
<li><p><strong>db</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>path</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>credential_provider</strong> (<em>CredentialProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>username</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>password</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>client_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_version</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>encoding</strong> (<em>str</em>)</p></li>
<li><p><strong>encoding_errors</strong> (<em>str</em>)</p></li>
<li><p><strong>decode_responses</strong> (<em>bool</em>)</p></li>
<li><p><strong>health_check_interval</strong> (<em>float</em>)</p></li>
<li><p><strong>socket_connect_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_keepalive</strong> (<em>bool</em>)</p></li>
<li><p><strong>socket_keepalive_options</strong> (<em>Mapping</em><em>[</em><em>int</em><em>, </em><em>int</em><em> | </em><em>bytes</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>socket_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>retry</strong> (<a class="reference internal" href="retry.html#redis.retry.Retry" title="redis.retry.Retry"><em>Retry</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>retry_on_error</strong> (<em>List</em><em>[</em><em>Type</em><em>[</em><em>Exception</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>ssl</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_ca_certs</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ca_data</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_cert_reqs</strong> (<em>str</em>)</p></li>
<li><p><strong>ssl_certfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_check_hostname</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_keyfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_min_version</strong> (<em>TLSVersion</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ciphers</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>protocol</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<div class="line-block">
<div class="line">Rest of the arguments will be passed to the
<a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> instances when created</div>
</div>
<dl class="field-list simple">
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="exceptions.html#redis.exceptions.RedisClusterException" title="redis.exceptions.RedisClusterException"><strong>RedisClusterException</strong></a> -- <p>if any arguments are invalid or unknown. Eg:</p>
<ul class="simple">
<li><p><cite>db</cite> != 0 or None</p></li>
<li><p><cite>path</cite> argument for unix socket connection</p></li>
<li><p>none of the <cite>host</cite>/<cite>port</cite> &amp; <cite>startup_nodes</cite> were provided</p></li>
</ul>
</p>
</dd>
<dt class="field-even">参数<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>port</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>startup_nodes</strong> (<em>List</em><em>[</em><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>require_full_coverage</strong> (<em>bool</em>)</p></li>
<li><p><strong>read_from_replicas</strong> (<em>bool</em>)</p></li>
<li><p><strong>reinitialize_steps</strong> (<em>int</em>)</p></li>
<li><p><strong>cluster_error_retry_attempts</strong> (<em>int</em>)</p></li>
<li><p><strong>connection_error_retry_attempts</strong> (<em>int</em>)</p></li>
<li><p><strong>max_connections</strong> (<em>int</em>)</p></li>
<li><p><strong>db</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>path</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>credential_provider</strong> (<em>CredentialProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>username</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>password</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>client_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lib_version</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>encoding</strong> (<em>str</em>)</p></li>
<li><p><strong>encoding_errors</strong> (<em>str</em>)</p></li>
<li><p><strong>decode_responses</strong> (<em>bool</em>)</p></li>
<li><p><strong>health_check_interval</strong> (<em>float</em>)</p></li>
<li><p><strong>socket_connect_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>socket_keepalive</strong> (<em>bool</em>)</p></li>
<li><p><strong>socket_keepalive_options</strong> (<em>Mapping</em><em>[</em><em>int</em><em>, </em><em>int</em><em> | </em><em>bytes</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>socket_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>retry</strong> (<a class="reference internal" href="retry.html#redis.retry.Retry" title="redis.retry.Retry"><em>Retry</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>retry_on_error</strong> (<em>List</em><em>[</em><em>Type</em><em>[</em><em>Exception</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>ssl</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_ca_certs</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ca_data</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_cert_reqs</strong> (<em>str</em>)</p></li>
<li><p><strong>ssl_certfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_check_hostname</strong> (<em>bool</em>)</p></li>
<li><p><strong>ssl_keyfile</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_min_version</strong> (<em>TLSVersion</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ssl_ciphers</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>protocol</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>address_remap</strong> (<em>Callable</em><em>[</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em><em>, </em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a Redis client object configured from the given URL.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">redis</span><span class="p">:</span><span class="o">//</span><span class="p">[[</span><span class="n">username</span><span class="p">]:[</span><span class="n">password</span><span class="p">]]</span><span class="nd">@localhost</span><span class="p">:</span><span class="mi">6379</span><span class="o">/</span><span class="mi">0</span>
<span class="n">rediss</span><span class="p">:</span><span class="o">//</span><span class="p">[[</span><span class="n">username</span><span class="p">]:[</span><span class="n">password</span><span class="p">]]</span><span class="nd">@localhost</span><span class="p">:</span><span class="mi">6379</span><span class="o">/</span><span class="mi">0</span>
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values are passed
through <code class="docutils literal notranslate"><span class="pre">urllib.parse.unquote</span></code> in order to replace any percent-encoded values
with their corresponding characters.</p>
<p>All querystring options are cast to their appropriate Python types. Boolean
arguments can be specified with string values &quot;True&quot;/&quot;False&quot; or &quot;Yes&quot;/&quot;No&quot;.
Values that cannot be properly cast cause a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once
parsed, the querystring arguments and keyword arguments are passed to
<a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a> when created.
In the case of conflicting arguments, querystring arguments are used.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>url</strong> (<em>str</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster" title="redis.asyncio.cluster.RedisCluster"><em>RedisCluster</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.initialize">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">initialize</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.initialize"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.initialize" title="Link to this definition">¶</a></dt>
<dd><p>Get all nodes from startup nodes &amp; creates connections if not initialized.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster" title="redis.asyncio.cluster.RedisCluster"><em>RedisCluster</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.aclose">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.aclose"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.aclose" title="Link to this definition">¶</a></dt>
<dd><p>Close all connections &amp; client if initialized.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.close" title="Link to this definition">¶</a></dt>
<dd><p>alias for aclose() for backwards compatibility</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_nodes">
<span class="sig-name descname"><span class="pre">get_nodes</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_nodes"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_nodes" title="Link to this definition">¶</a></dt>
<dd><p>Get all nodes of the cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_primaries">
<span class="sig-name descname"><span class="pre">get_primaries</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_primaries"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_primaries" title="Link to this definition">¶</a></dt>
<dd><p>Get the primary nodes of the cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_replicas">
<span class="sig-name descname"><span class="pre">get_replicas</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_replicas"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_replicas" title="Link to this definition">¶</a></dt>
<dd><p>Get the replica nodes of the cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_random_node">
<span class="sig-name descname"><span class="pre">get_random_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_random_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_random_node" title="Link to this definition">¶</a></dt>
<dd><p>Get a random node of the cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_default_node">
<span class="sig-name descname"><span class="pre">get_default_node</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_default_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_default_node" title="Link to this definition">¶</a></dt>
<dd><p>Get the default node of the client.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.set_default_node">
<span class="sig-name descname"><span class="pre">set_default_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.set_default_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.set_default_node" title="Link to this definition">¶</a></dt>
<dd><p>Set the default node of the client.</p>
<dl class="field-list simple">
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="exceptions.html#redis.exceptions.DataError" title="redis.exceptions.DataError"><strong>DataError</strong></a> -- if None is passed or node does not exist in cluster.</p>
</dd>
<dt class="field-even">参数<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>node</strong> (<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a>)</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_node">
<span class="sig-name descname"><span class="pre">get_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">node_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_node"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_node" title="Link to this definition">¶</a></dt>
<dd><p>Get node by (host, port) or node_name.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>port</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>node_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_node_from_key">
<span class="sig-name descname"><span class="pre">get_node_from_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replica</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_node_from_key"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_node_from_key" title="Link to this definition">¶</a></dt>
<dd><p>Get the cluster node corresponding to the provided key.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>)</p></li>
<li><p><strong>replica</strong> (<em>bool</em>) -- <div class="line-block">
<div class="line">Indicates if a replica should be returned</div>
<div class="line">None will returned if no replica holds this key</div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#redis.exceptions.SlotNotCoveredError" title="redis.exceptions.SlotNotCoveredError"><strong>SlotNotCoveredError</strong></a> -- if the key is not covered by any slot.</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><em>ClusterNode</em></a> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.keyslot">
<span class="sig-name descname"><span class="pre">keyslot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.keyslot"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.keyslot" title="Link to this definition">¶</a></dt>
<dd><p>Find the keyslot for a given key.</p>
<p>See: <a class="reference external" href="https://redis.io/docs/manual/scaling/#redis-cluster-data-sharding">https://redis.io/docs/manual/scaling/#redis-cluster-data-sharding</a></p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>key</strong> (<em>bytes</em><em> | </em><em>memoryview</em><em> | </em><em>str</em><em> | </em><em>int</em><em> | </em><em>float</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Get the encoder object of the client.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Encoder</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.get_connection_kwargs">
<span class="sig-name descname"><span class="pre">get_connection_kwargs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.get_connection_kwargs"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.get_connection_kwargs" title="Link to this definition">¶</a></dt>
<dd><p>Get the kwargs passed to <a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em> | None]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.set_response_callback">
<span class="sig-name descname"><span class="pre">set_response_callback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">callback</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.set_response_callback"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.set_response_callback" title="Link to this definition">¶</a></dt>
<dd><p>Set a custom response callback.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>command</strong> (<em>str</em>)</p></li>
<li><p><strong>callback</strong> (<em>ResponseCallbackProtocol</em><em> | </em><em>AsyncResponseCallbackProtocol</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.execute_command">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.execute_command"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.execute_command" title="Link to this definition">¶</a></dt>
<dd><p>Execute a raw command on the appropriate cluster node or target_nodes.</p>
<p>It will retry the command as specified by <code class="xref py py-attr docutils literal notranslate"><span class="pre">cluster_error_retry_attempts</span></code> &amp;
then raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>bytes</em><em> | </em><em>memoryview</em><em> | </em><em>str</em><em> | </em><em>int</em><em> | </em><em>float</em>) -- <div class="line-block">
<div class="line">Raw command args</div>
</div>
</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) -- <ul>
<li><p>target_nodes: <code class="xref py py-attr docutils literal notranslate"><span class="pre">NODE_FLAGS</span></code> or <a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>
or List[<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>] or Dict[Any, <a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>]</p></li>
<li><p>Rest of the kwargs are passed to the Redis connection</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#redis.exceptions.RedisClusterException" title="redis.exceptions.RedisClusterException"><strong>RedisClusterException</strong></a> -- if target_nodes is not provided &amp; the command
can't be mapped to a slot</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.pipeline">
<span class="sig-name descname"><span class="pre">pipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shard_hint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.pipeline"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.pipeline" title="Link to this definition">¶</a></dt>
<dd><p>Create &amp; return a new <a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline" title="redis.asyncio.cluster.ClusterPipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterPipeline</span></code></a> object.</p>
<p>Cluster implementation of pipeline does not support transaction or shard_hint.</p>
<dl class="field-list simple">
<dt class="field-odd">抛出<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="exceptions.html#redis.exceptions.RedisClusterException" title="redis.exceptions.RedisClusterException"><strong>RedisClusterException</strong></a> -- if transaction or shard_hint are truthy values</p>
</dd>
<dt class="field-even">参数<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>transaction</strong> (<em>None</em><em> | </em><em>Any</em>)</p></li>
<li><p><strong>shard_hint</strong> (<em>None</em><em> | </em><em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline" title="redis.asyncio.cluster.ClusterPipeline"><em>ClusterPipeline</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.RedisCluster.lock">
<span class="sig-name descname"><span class="pre">lock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sleep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blocking_timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lock_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">thread_local</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#RedisCluster.lock"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.RedisCluster.lock" title="Link to this definition">¶</a></dt>
<dd><p>Return a new Lock object using key <code class="docutils literal notranslate"><span class="pre">name</span></code> that mimics
the behavior of threading.Lock.</p>
<p>If specified, <code class="docutils literal notranslate"><span class="pre">timeout</span></code> indicates a maximum life for the lock.
By default, it will remain locked until release() is called.</p>
<p><code class="docutils literal notranslate"><span class="pre">sleep</span></code> indicates the amount of time to sleep per loop iteration
when the lock is in blocking mode and another client is currently
holding the lock.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking</span></code> indicates whether calling <code class="docutils literal notranslate"><span class="pre">acquire</span></code> should block until
the lock has been acquired or to fail immediately, causing <code class="docutils literal notranslate"><span class="pre">acquire</span></code>
to return False and the lock not being acquired. Defaults to True.
Note this value can be overridden by passing a <code class="docutils literal notranslate"><span class="pre">blocking</span></code>
argument to <code class="docutils literal notranslate"><span class="pre">acquire</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> indicates the maximum amount of time in seconds to
spend trying to acquire the lock. A value of <code class="docutils literal notranslate"><span class="pre">None</span></code> indicates
continue trying forever. <code class="docutils literal notranslate"><span class="pre">blocking_timeout</span></code> can be specified as a
float or integer, both representing the number of seconds to wait.</p>
<p><code class="docutils literal notranslate"><span class="pre">lock_class</span></code> forces the specified lock implementation. Note that as
of redis-py 3.0, the only lock class we implement is <code class="docutils literal notranslate"><span class="pre">Lock</span></code> (which is
a Lua-based lock). So, it's unlikely you'll need this parameter, unless
you have created your own custom lock class.</p>
<p><code class="docutils literal notranslate"><span class="pre">thread_local</span></code> indicates whether the lock token is placed in
thread-local storage. By default, the token is placed in thread local
storage so that a thread only sees its token, not a token set by
another thread. Consider the following timeline:</p>
<blockquote>
<div><dl class="simple">
<dt>time: 0, thread-1 acquires <cite>my-lock</cite>, with a timeout of 5 seconds.</dt><dd><p>thread-1 sets the token to &quot;abc&quot;</p>
</dd>
<dt>time: 1, thread-2 blocks trying to acquire <cite>my-lock</cite> using the</dt><dd><p>Lock instance.</p>
</dd>
<dt>time: 5, thread-1 has not yet completed. redis expires the lock</dt><dd><p>key.</p>
</dd>
<dt>time: 5, thread-2 acquired <cite>my-lock</cite> now that it's available.</dt><dd><p>thread-2 sets the token to &quot;xyz&quot;</p>
</dd>
<dt>time: 6, thread-1 finishes its work and calls release(). if the</dt><dd><p>token is <em>not</em> stored in thread local storage, then
thread-1 would see the token value as &quot;xyz&quot; and would be
able to successfully release the thread-2's lock.</p>
</dd>
</dl>
</div></blockquote>
<p>In some use cases it's necessary to disable thread local storage. For
example, if you have code where one thread acquires a lock and passes
that lock instance to a worker thread to release later. If thread
local storage isn't disabled in this case, the worker thread won't see
the token set by the thread that acquired the lock. Our assumption
is that these cases aren't common and as such default to using
thread local storage.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<em>bytes</em><em> | </em><em>str</em><em> | </em><em>memoryview</em>)</p></li>
<li><p><strong>timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>sleep</strong> (<em>float</em>)</p></li>
<li><p><strong>blocking</strong> (<em>bool</em>)</p></li>
<li><p><strong>blocking_timeout</strong> (<em>float</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>lock_class</strong> (<em>Type</em><em>[</em><em>Lock</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>thread_local</strong> (<em>bool</em>)</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Lock</em></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="id4">
<h3>ClusterNode (异步)<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.cluster.ClusterNode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.cluster.</span></span><span class="sig-name descname"><span class="pre">ClusterNode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">server_type=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections=2147483648</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">connection_class=&lt;class</span> <span class="pre">'redis.asyncio.connection.Connection'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**connection_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#ClusterNode"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.ClusterNode" title="Link to this definition">¶</a></dt>
<dd><p>Create a new ClusterNode.</p>
<p>Each ClusterNode manages multiple <a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><code class="xref py py-class docutils literal notranslate"><span class="pre">Connection</span></code></a>
objects for the (host, port).</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>)</p></li>
<li><p><strong>port</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>server_type</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>max_connections</strong> (<em>int</em>)</p></li>
<li><p><strong>connection_class</strong> (<em>Type</em><em>[</em><a class="reference internal" href="#redis.asyncio.connection.Connection" title="redis.asyncio.connection.Connection"><em>Connection</em></a><em>]</em>)</p></li>
<li><p><strong>connection_kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="clusterpipeline">
<h3>ClusterPipeline (异步)<a class="headerlink" href="#clusterpipeline" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.cluster.ClusterPipeline">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.cluster.</span></span><span class="sig-name descname"><span class="pre">ClusterPipeline</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">client</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#ClusterPipeline"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.ClusterPipeline" title="Link to this definition">¶</a></dt>
<dd><p>Create a new ClusterPipeline object.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="p">(</span>
    <span class="n">rc</span><span class="o">.</span><span class="n">pipeline</span><span class="p">()</span>
    <span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">hset</span><span class="p">(</span><span class="s2">&quot;K&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">hgetall</span><span class="p">(</span><span class="s2">&quot;K&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">mset_nonatomic</span><span class="p">({</span><span class="s2">&quot;A&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">})</span>
    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;B&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;B&quot;</span><span class="p">,</span> <span class="s2">&quot;K&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="p">)</span>
<span class="c1"># result = [True, &quot;1&quot;, 1, {&quot;F&quot;: &quot;V&quot;}, True, True, &quot;2&quot;, &quot;3&quot;, 1, 1, 1]</span>
</pre></div>
</div>
<p>Note: For commands <cite>DELETE</cite>, <cite>EXISTS</cite>, <cite>TOUCH</cite>, <cite>UNLINK</cite>, <cite>mset_nonatomic</cite>, which
are split across multiple nodes, you'll get multiple results for them in the array.</p>
<dl class="simple">
<dt>Retryable errors:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.ClusterDownError" title="redis.exceptions.ClusterDownError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterDownError</span></code></a></p></li>
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.ConnectionError" title="redis.exceptions.ConnectionError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionError</span></code></a></p></li>
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.TimeoutError" title="redis.exceptions.TimeoutError"><code class="xref py py-class docutils literal notranslate"><span class="pre">TimeoutError</span></code></a></p></li>
</ul>
</dd>
<dt>Redirection errors:</dt><dd><ul class="simple">
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.TryAgainError" title="redis.exceptions.TryAgainError"><code class="xref py py-class docutils literal notranslate"><span class="pre">TryAgainError</span></code></a></p></li>
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.MovedError" title="redis.exceptions.MovedError"><code class="xref py py-class docutils literal notranslate"><span class="pre">MovedError</span></code></a></p></li>
<li><p><a class="reference internal" href="exceptions.html#redis.exceptions.AskError" title="redis.exceptions.AskError"><code class="xref py py-class docutils literal notranslate"><span class="pre">AskError</span></code></a></p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>client</strong> (<a class="reference internal" href="#redis.asyncio.cluster.RedisCluster" title="redis.asyncio.cluster.RedisCluster"><em>RedisCluster</em></a>) -- <div class="line-block">
<div class="line">Existing <a class="reference internal" href="#redis.asyncio.cluster.RedisCluster" title="redis.asyncio.cluster.RedisCluster"><code class="xref py py-class docutils literal notranslate"><span class="pre">RedisCluster</span></code></a> client</div>
</div>
</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.ClusterPipeline.execute_command">
<span class="sig-name descname"><span class="pre">execute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#ClusterPipeline.execute_command"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.ClusterPipeline.execute_command" title="Link to this definition">¶</a></dt>
<dd><p>Append a raw command to the pipeline.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>bytes</em><em> | </em><em>str</em><em> | </em><em>memoryview</em><em> | </em><em>int</em><em> | </em><em>float</em>) -- <div class="line-block">
<div class="line">Raw command args</div>
</div>
</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) -- <ul>
<li><p>target_nodes: <code class="xref py py-attr docutils literal notranslate"><span class="pre">NODE_FLAGS</span></code> or <a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>
or List[<a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>] or Dict[Any, <a class="reference internal" href="#redis.asyncio.cluster.ClusterNode" title="redis.asyncio.cluster.ClusterNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">ClusterNode</span></code></a>]</p></li>
<li><p>Rest of the kwargs are passed to the Redis connection</p></li>
</ul>
</p></li>
</ul>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline" title="redis.asyncio.cluster.ClusterPipeline"><em>ClusterPipeline</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.cluster.ClusterPipeline.execute">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raise_on_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_redirections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/cluster.html#ClusterPipeline.execute"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.cluster.ClusterPipeline.execute" title="Link to this definition">¶</a></dt>
<dd><p>Execute the pipeline.</p>
<p>It will retry the commands as specified by <code class="xref py py-attr docutils literal notranslate"><span class="pre">cluster_error_retry_attempts</span></code>
&amp; then raise an exception.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>raise_on_error</strong> (<em>bool</em>) -- <div class="line-block">
<div class="line">Raise the first error if there are any errors</div>
</div>
</p></li>
<li><p><strong>allow_redirections</strong> (<em>bool</em>) -- <div class="line-block">
<div class="line">Whether to retry each failed command individually in case of redirection
errors</div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">抛出<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="exceptions.html#redis.exceptions.RedisClusterException" title="redis.exceptions.RedisClusterException"><strong>RedisClusterException</strong></a> -- if target_nodes is not provided &amp; the command
can't be mapped to a slot</p>
</dd>
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="connection">
<h2>连接(Connection)<a class="headerlink" href="#connection" title="Link to this heading">¶</a></h2>
<p>完整示例见： <a class="reference external" href="examples/connection_examples.html">这里</a></p>
<section id="id5">
<h3>连接(Connection)<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#Connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Manages TCP communication to and from a Redis server</p>
</dd></dl>

</section>
<section id="connection-async">
<h3>连接 (异步)(Connection (Async))<a class="headerlink" href="#connection-async" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.connection.Connection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.connection.</span></span><span class="sig-name descname"><span class="pre">Connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">6379</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_keepalive_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">socket_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#Connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.Connection" title="Link to this definition">¶</a></dt>
<dd><p>Manages TCP communication to and from a Redis server</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>host</strong> (<em>str</em>)</p></li>
<li><p><strong>port</strong> (<em>str</em><em> | </em><em>int</em>)</p></li>
<li><p><strong>socket_keepalive</strong> (<em>bool</em>)</p></li>
<li><p><strong>socket_keepalive_options</strong> (<em>Mapping</em><em>[</em><em>int</em><em>, </em><em>int</em><em> | </em><em>bytes</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>socket_type</strong> (<em>int</em>)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
<section id="connection-pools">
<h2>连接池(Connection Pools)<a class="headerlink" href="#connection-pools" title="Link to this heading">¶</a></h2>
<p>完整示例见： <a class="reference external" href="examples/connection_examples.html">这里</a></p>
<section id="connectionpool">
<h3>ConnectionPool<a class="headerlink" href="#connectionpool" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.connection.</span></span><span class="sig-name descname"><span class="pre">ConnectionPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_class=&lt;class</span> <span class="pre">'redis.connection.Connection'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cache_factory=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**connection_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool" title="Link to this definition">¶</a></dt>
<dd><p>Create a connection pool. <code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">max_connections</span></code> is set, then this
object raises <a class="reference internal" href="exceptions.html#redis.exceptions.ConnectionError" title="redis.exceptions.ConnectionError"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionError</span></code></a> when the pool's
limit is reached.</p>
<p>By default, TCP connections are created unless <code class="docutils literal notranslate"><span class="pre">connection_class</span></code>
is specified. Use class:<cite>.UnixDomainSocketConnection</cite> for
unix sockets.</p>
<p>Any additional keyword arguments are passed to the constructor of
<code class="docutils literal notranslate"><span class="pre">connection_class</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>max_connections</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>cache_factory</strong> (<em>CacheFactoryInterface</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.close"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.close" title="Link to this definition">¶</a></dt>
<dd><p>Close the pool, disconnecting all connections</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.disconnect">
<span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inuse_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.disconnect"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnects connections in the pool</p>
<p>If <code class="docutils literal notranslate"><span class="pre">inuse_connections</span></code> is True, disconnect connections that are
current in use, potentially by other threads. Otherwise only disconnect
connections that are idle in the pool.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inuse_connections</strong> (<em>bool</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a connection pool configured from the given URL.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>redis://[[username]:[password]]@localhost:6379/0
rediss://[[username]:[password]]@localhost:6379/0
unix://[username@]/path/to/socket.sock?db=0[&amp;password=password]
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unix://</span></code>: creates a Unix Domain Socket connection.</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values
are passed through urllib.parse.unquote in order to replace any
percent-encoded values with their corresponding characters.</p>
<p>There are several ways to specify a database number. The first value
found will be used:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> querystring option, e.g. redis://localhost?db=0</p></li>
<li><p>If using the redis:// or rediss:// schemes, the path argument
of the url, e.g. redis://localhost/0</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> keyword argument to this function.</p></li>
</ol>
</div></blockquote>
<p>If none of these options are specified, the default db=0 is used.</p>
<p>All querystring options are cast to their appropriate Python types.
Boolean arguments can be specified with string values &quot;True&quot;/&quot;False&quot;
or &quot;Yes&quot;/&quot;No&quot;. Values that cannot be properly cast cause a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once parsed, the querystring arguments
and keyword arguments are passed to the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code>'s
class initializer. In the case of conflicting arguments, querystring
arguments always win.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.get_connection">
<span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.get_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get a connection from the pool</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>command_name</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#redis.connection.Connection" title="redis.connection.Connection"><em>Connection</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Return an encoder based on encoding settings</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Encoder</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.get_protocol">
<span class="sig-name descname"><span class="pre">get_protocol</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.get_protocol"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.get_protocol" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">返回<span class="colon">:</span></dt>
<dd class="field-odd"><p>The RESP protocol version, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the protocol is not specified,
in which case the server default will be used.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.make_connection">
<span class="sig-name descname"><span class="pre">make_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.make_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.make_connection" title="Link to this definition">¶</a></dt>
<dd><p>Create a new connection</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>ConnectionInterface</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.connection.ConnectionPool.release">
<span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/connection.html#ConnectionPool.release"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.connection.ConnectionPool.release" title="Link to this definition">¶</a></dt>
<dd><p>Releases the connection back to the pool</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>connection</strong> (<a class="reference internal" href="#redis.connection.Connection" title="redis.connection.Connection"><em>Connection</em></a>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="id6">
<h3>ConnectionPool (异步)<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">redis.asyncio.connection.</span></span><span class="sig-name descname"><span class="pre">ConnectionPool</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection_class=&lt;class</span> <span class="pre">'redis.asyncio.connection.Connection'&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connections=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**connection_kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool" title="Link to this definition">¶</a></dt>
<dd><p>Create a connection pool. <code class="docutils literal notranslate"><span class="pre">If</span> <span class="pre">max_connections</span></code> is set, then this
object raises <code class="xref py py-class docutils literal notranslate"><span class="pre">ConnectionError</span></code> when the pool's
limit is reached.</p>
<p>By default, TCP connections are created unless <code class="docutils literal notranslate"><span class="pre">connection_class</span></code>
is specified. Use <code class="xref py py-class docutils literal notranslate"><span class="pre">UnixDomainSocketConnection</span></code> for
unix sockets.</p>
<p>Any additional keyword arguments are passed to the constructor of
<code class="docutils literal notranslate"><span class="pre">connection_class</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_class</strong> (<em>Type</em><em>[</em><em>AbstractConnection</em><em>]</em>)</p></li>
<li><p><strong>max_connections</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.aclose">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclose</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.aclose"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.aclose" title="Link to this definition">¶</a></dt>
<dd><p>Close the pool, disconnecting all connections</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.can_get_connection">
<span class="sig-name descname"><span class="pre">can_get_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.can_get_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.can_get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Return True if a connection can be retrieved from the pool.</p>
<dl class="field-list simple">
<dt class="field-odd">返回类型<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.disconnect">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">disconnect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">inuse_connections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.disconnect"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.disconnect" title="Link to this definition">¶</a></dt>
<dd><p>Disconnects connections in the pool</p>
<p>If <code class="docutils literal notranslate"><span class="pre">inuse_connections</span></code> is True, disconnect connections that are
current in use, potentially by other tasks. Otherwise only disconnect
connections that are idle in the pool.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>inuse_connections</strong> (<em>bool</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.ensure_connection">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ensure_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.ensure_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.ensure_connection" title="Link to this definition">¶</a></dt>
<dd><p>Ensure that the connection object is connected and valid</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>connection</strong> (<em>AbstractConnection</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.from_url">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_url</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">url</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.from_url"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.from_url" title="Link to this definition">¶</a></dt>
<dd><p>Return a connection pool configured from the given URL.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>redis://[[username]:[password]]@localhost:6379/0
rediss://[[username]:[password]]@localhost:6379/0
unix://[username@]/path/to/socket.sock?db=0[&amp;password=password]
</pre></div>
</div>
<p>Three URL schemes are supported:</p>
<ul class="simple">
<li><p><cite>redis://</cite> creates a TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/redis">https://www.iana.org/assignments/uri-schemes/prov/redis</a>&gt;</p></li>
<li><p><cite>rediss://</cite> creates a SSL wrapped TCP socket connection. See more at:
&lt;<a class="reference external" href="https://www.iana.org/assignments/uri-schemes/prov/rediss">https://www.iana.org/assignments/uri-schemes/prov/rediss</a>&gt;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unix://</span></code>: creates a Unix Domain Socket connection.</p></li>
</ul>
<p>The username, password, hostname, path and all querystring values
are passed through urllib.parse.unquote in order to replace any
percent-encoded values with their corresponding characters.</p>
<p>There are several ways to specify a database number. The first value
found will be used:</p>
<ol class="arabic simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> querystring option, e.g. redis://localhost?db=0</p></li>
<li><dl class="simple">
<dt>If using the redis:// or rediss:// schemes, the path argument</dt><dd><p>of the url, e.g. redis://localhost/0</p>
</dd>
</dl>
</li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">db</span></code> keyword argument to this function.</p></li>
</ol>
<p>If none of these options are specified, the default db=0 is used.</p>
<p>All querystring options are cast to their appropriate Python types.
Boolean arguments can be specified with string values &quot;True&quot;/&quot;False&quot;
or &quot;Yes&quot;/&quot;No&quot;. Values that cannot be properly cast cause a
<code class="docutils literal notranslate"><span class="pre">ValueError</span></code> to be raised. Once parsed, the querystring arguments
and keyword arguments are passed to the <code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code>'s
class initializer. In the case of conflicting arguments, querystring
arguments always win.</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>url</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">返回类型<span class="colon">:</span></dt>
<dd class="field-even"><p><em>_CP</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.get_available_connection">
<span class="sig-name descname"><span class="pre">get_available_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.get_available_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.get_available_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get a connection from the pool, without making sure it is connected</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.get_connection">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_connection</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">command_name</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">keys</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">options</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.get_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.get_connection" title="Link to this definition">¶</a></dt>
<dd><p>Get a connected connection from the pool</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.get_encoder">
<span class="sig-name descname"><span class="pre">get_encoder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.get_encoder"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.get_encoder" title="Link to this definition">¶</a></dt>
<dd><p>Return an encoder based on encoding settings</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.make_connection">
<span class="sig-name descname"><span class="pre">make_connection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.make_connection"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.make_connection" title="Link to this definition">¶</a></dt>
<dd><p>Create a new connection.  Can be overridden by child classes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="redis.asyncio.connection.ConnectionPool.release">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">release</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">connection</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/redis/asyncio/connection.html#ConnectionPool.release"><span class="viewcode-link"><span class="pre">[源代码]</span></span></a><a class="headerlink" href="#redis.asyncio.connection.ConnectionPool.release" title="Link to this definition">¶</a></dt>
<dd><p>Releases the connection back to the pool</p>
<dl class="field-list simple">
<dt class="field-odd">参数<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>connection</strong> (<em>AbstractConnection</em>)</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="clustering.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">集群(Clustering)</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="redismodules/timeseries.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">RedisTimeSeries 命令</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Redis Inc
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/redis/redis-py" aria-label="GitHub">
            <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
            </svg>
        </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">连接到 Redis (Connecting to Redis)</a><ul>
<li><a class="reference internal" href="#generic-client">通用客户端(Generic Client)</a><ul>
<li><a class="reference internal" href="#redis.Redis"><code class="docutils literal notranslate"><span class="pre">Redis</span></code></a><ul>
<li><a class="reference internal" href="#redis.Redis.from_pool"><code class="docutils literal notranslate"><span class="pre">Redis.from_pool()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.from_url"><code class="docutils literal notranslate"><span class="pre">Redis.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.get_connection_kwargs"><code class="docutils literal notranslate"><span class="pre">Redis.get_connection_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.get_encoder"><code class="docutils literal notranslate"><span class="pre">Redis.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.load_external_module"><code class="docutils literal notranslate"><span class="pre">Redis.load_external_module()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.lock"><code class="docutils literal notranslate"><span class="pre">Redis.lock()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.parse_response"><code class="docutils literal notranslate"><span class="pre">Redis.parse_response()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.pipeline"><code class="docutils literal notranslate"><span class="pre">Redis.pipeline()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.pubsub"><code class="docutils literal notranslate"><span class="pre">Redis.pubsub()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.set_response_callback"><code class="docutils literal notranslate"><span class="pre">Redis.set_response_callback()</span></code></a></li>
<li><a class="reference internal" href="#redis.Redis.transaction"><code class="docutils literal notranslate"><span class="pre">Redis.transaction()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sentinel-client">哨兵客户端(Sentinel Client)</a><ul>
<li><a class="reference internal" href="#id1">哨兵(Sentinel)</a><ul>
<li><a class="reference internal" href="#redis.sentinel.Sentinel"><code class="docutils literal notranslate"><span class="pre">Sentinel</span></code></a><ul>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.discover_master"><code class="docutils literal notranslate"><span class="pre">Sentinel.discover_master()</span></code></a></li>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.discover_slaves"><code class="docutils literal notranslate"><span class="pre">Sentinel.discover_slaves()</span></code></a></li>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.execute_command"><code class="docutils literal notranslate"><span class="pre">Sentinel.execute_command()</span></code></a></li>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.filter_slaves"><code class="docutils literal notranslate"><span class="pre">Sentinel.filter_slaves()</span></code></a></li>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.master_for"><code class="docutils literal notranslate"><span class="pre">Sentinel.master_for()</span></code></a></li>
<li><a class="reference internal" href="#redis.sentinel.Sentinel.slave_for"><code class="docutils literal notranslate"><span class="pre">Sentinel.slave_for()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#sentinelconnectionpool">哨兵连接池(SentinelConnectionPool)</a><ul>
<li><a class="reference internal" href="#redis.sentinel.SentinelConnectionPool"><code class="docutils literal notranslate"><span class="pre">SentinelConnectionPool</span></code></a><ul>
<li><a class="reference internal" href="#redis.sentinel.SentinelConnectionPool.rotate_slaves"><code class="docutils literal notranslate"><span class="pre">SentinelConnectionPool.rotate_slaves()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#cluster-client">集群客户端(Cluster Client)</a><ul>
<li><a class="reference internal" href="#rediscluster">RedisCluster</a><ul>
<li><a class="reference internal" href="#redis.cluster.RedisCluster"><code class="docutils literal notranslate"><span class="pre">RedisCluster</span></code></a><ul>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.determine_slot"><code class="docutils literal notranslate"><span class="pre">RedisCluster.determine_slot()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.from_url"><code class="docutils literal notranslate"><span class="pre">RedisCluster.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.get_connection_kwargs"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_connection_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.get_default_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_default_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.get_encoder"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.get_node_from_key"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_node_from_key()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.keyslot"><code class="docutils literal notranslate"><span class="pre">RedisCluster.keyslot()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.load_external_module"><code class="docutils literal notranslate"><span class="pre">RedisCluster.load_external_module()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.lock"><code class="docutils literal notranslate"><span class="pre">RedisCluster.lock()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.monitor"><code class="docutils literal notranslate"><span class="pre">RedisCluster.monitor()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.on_connect"><code class="docutils literal notranslate"><span class="pre">RedisCluster.on_connect()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.pipeline"><code class="docutils literal notranslate"><span class="pre">RedisCluster.pipeline()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.pubsub"><code class="docutils literal notranslate"><span class="pre">RedisCluster.pubsub()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.set_default_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.set_default_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.cluster.RedisCluster.set_response_callback"><code class="docutils literal notranslate"><span class="pre">RedisCluster.set_response_callback()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#clusternode">ClusterNode</a><ul>
<li><a class="reference internal" href="#redis.cluster.ClusterNode"><code class="docutils literal notranslate"><span class="pre">ClusterNode</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#async-client">异步客户端(Async Client)</a><ul>
<li><a class="reference internal" href="#redis.asyncio.client.Redis"><code class="docutils literal notranslate"><span class="pre">Redis</span></code></a><ul>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.aclose"><code class="docutils literal notranslate"><span class="pre">Redis.aclose()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.close"><code class="docutils literal notranslate"><span class="pre">Redis.close()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.execute_command"><code class="docutils literal notranslate"><span class="pre">Redis.execute_command()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.from_pool"><code class="docutils literal notranslate"><span class="pre">Redis.from_pool()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.from_url"><code class="docutils literal notranslate"><span class="pre">Redis.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.get_connection_kwargs"><code class="docutils literal notranslate"><span class="pre">Redis.get_connection_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.get_encoder"><code class="docutils literal notranslate"><span class="pre">Redis.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.load_external_module"><code class="docutils literal notranslate"><span class="pre">Redis.load_external_module()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.lock"><code class="docutils literal notranslate"><span class="pre">Redis.lock()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.parse_response"><code class="docutils literal notranslate"><span class="pre">Redis.parse_response()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.pipeline"><code class="docutils literal notranslate"><span class="pre">Redis.pipeline()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.pubsub"><code class="docutils literal notranslate"><span class="pre">Redis.pubsub()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.set_response_callback"><code class="docutils literal notranslate"><span class="pre">Redis.set_response_callback()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.client.Redis.transaction"><code class="docutils literal notranslate"><span class="pre">Redis.transaction()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id2">异步集群客户端</a><ul>
<li><a class="reference internal" href="#id3">RedisCluster (异步)</a><ul>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster"><code class="docutils literal notranslate"><span class="pre">RedisCluster</span></code></a><ul>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.from_url"><code class="docutils literal notranslate"><span class="pre">RedisCluster.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.initialize"><code class="docutils literal notranslate"><span class="pre">RedisCluster.initialize()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.aclose"><code class="docutils literal notranslate"><span class="pre">RedisCluster.aclose()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.close"><code class="docutils literal notranslate"><span class="pre">RedisCluster.close()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_nodes"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_nodes()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_primaries"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_primaries()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_replicas"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_replicas()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_random_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_random_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_default_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_default_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.set_default_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.set_default_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_node"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_node()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_node_from_key"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_node_from_key()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.keyslot"><code class="docutils literal notranslate"><span class="pre">RedisCluster.keyslot()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_encoder"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.get_connection_kwargs"><code class="docutils literal notranslate"><span class="pre">RedisCluster.get_connection_kwargs()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.set_response_callback"><code class="docutils literal notranslate"><span class="pre">RedisCluster.set_response_callback()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.execute_command"><code class="docutils literal notranslate"><span class="pre">RedisCluster.execute_command()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.pipeline"><code class="docutils literal notranslate"><span class="pre">RedisCluster.pipeline()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.RedisCluster.lock"><code class="docutils literal notranslate"><span class="pre">RedisCluster.lock()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id4">ClusterNode (异步)</a><ul>
<li><a class="reference internal" href="#redis.asyncio.cluster.ClusterNode"><code class="docutils literal notranslate"><span class="pre">ClusterNode</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clusterpipeline">ClusterPipeline (异步)</a><ul>
<li><a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline"><code class="docutils literal notranslate"><span class="pre">ClusterPipeline</span></code></a><ul>
<li><a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline.execute_command"><code class="docutils literal notranslate"><span class="pre">ClusterPipeline.execute_command()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.cluster.ClusterPipeline.execute"><code class="docutils literal notranslate"><span class="pre">ClusterPipeline.execute()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#connection">连接(Connection)</a><ul>
<li><a class="reference internal" href="#id5">连接(Connection)</a><ul>
<li><a class="reference internal" href="#redis.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection-async">连接 (异步)(Connection (Async))</a><ul>
<li><a class="reference internal" href="#redis.asyncio.connection.Connection"><code class="docutils literal notranslate"><span class="pre">Connection</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#connection-pools">连接池(Connection Pools)</a><ul>
<li><a class="reference internal" href="#connectionpool">ConnectionPool</a><ul>
<li><a class="reference internal" href="#redis.connection.ConnectionPool"><code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code></a><ul>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.close"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.close()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.disconnect"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.from_url"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.get_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.get_encoder"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.get_protocol"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_protocol()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.make_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.make_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.connection.ConnectionPool.release"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.release()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id6">ConnectionPool (异步)</a><ul>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool"><code class="docutils literal notranslate"><span class="pre">ConnectionPool</span></code></a><ul>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.aclose"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.aclose()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.can_get_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.can_get_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.disconnect"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.disconnect()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.ensure_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.ensure_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.from_url"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.from_url()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.get_available_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_available_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.get_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.get_encoder"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.get_encoder()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.make_connection"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.make_connection()</span></code></a></li>
<li><a class="reference internal" href="#redis.asyncio.connection.ConnectionPool.release"><code class="docutils literal notranslate"><span class="pre">ConnectionPool.release()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=91cf81b4"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/translations.js?v=beaddf03"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>